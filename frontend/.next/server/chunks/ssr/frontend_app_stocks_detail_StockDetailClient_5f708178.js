module.exports=[39571,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(82313),e=a.i(93609),f=a.i(71810),g=a.i(71936),h=a.i(21900),i=a.i(47802),j=a.i(26330),k=a.i(69355),l=a.i(57855),m=a.i(11425),n=a.i(59277),o=a.i(75038),p=a.i(54588);let q=["1D","1W","1M","1Y","ALL"],r=[1,10,20,50,100];function s(){let{user:a,loading:s}=(0,d.useAuth)(),t=(0,e.useRouter)(),u=(0,e.useSearchParams)(),v=(0,n.useToast)(),w=u.get("symbol")?.toUpperCase(),x=g.STOCKS.find(a=>a.symbol===w),[y,z]=(0,c.useState)("1D"),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)("buy"),[Q,R]=(0,c.useState)(!1),[S,T]=(0,c.useState)({price:0,change:0,isUp:!0}),[U,V]=(0,c.useState)([]),[W,X]=(0,c.useState)({qty:0,market_value:0}),[Y,Z]=(0,c.useState)(0),[$,_]=(0,c.useState)(!0),aa=W.qty,ab=W.market_value;(0,c.useEffect)(()=>{s||a||t.push("/login")},[a,s,t]);let ac=(0,c.useCallback)(async()=>{if(w)try{let a=(await o.default.get(`/trading/quote/${w}`)).data.data,b=a.price,c=a.open||a.prevClose||b,d=b-c,e=c?d/c*100:0;T({price:b,change:e,isUp:e>=0});let f=await o.default.get(`/trading/positions/${x.alpacaSymbol||w}`);f.data.success&&f.data.data&&X(f.data.data);let g=await o.default.get("/wallet/balance");g.data.success&&Z(g.data.data.balance/100)}catch(a){console.error("Failed to fetch stock data:",a.response?.data||a.message)}},[w,x]),ad=(0,c.useCallback)(async()=>{if(w)try{let{timeframe:a,start:b,limit:c}=(0,g.getBarParams)(y),d=((await o.default.get(`/trading/bars/${w}`,{params:{timeframe:a,start:b,limit:c}})).data.data.bars||[]).map(a=>parseFloat(a.c));d.length>0&&V(d)}catch(a){console.error("Failed to fetch stock chart:",a.response?.data||a.message)}},[w,y]);if((0,c.useEffect)(()=>{a&&x&&(_(!0),Promise.all([ac(),ad()]).finally(()=>_(!1)))},[a,x,y,ac,ad]),!x)return(0,b.jsx)("div",{className:"min-h-screen bg-white dark:bg-black flex items-center justify-center",children:(0,b.jsx)("p",{className:"text-gray-500",children:"Stock not found"})});let[ae,af]=(0,c.useState)("Filled"),ag=async()=>{let a=parseFloat(I);if(a&&!(a<=0)){L(!0);try{let b=await o.default.post("/trading/order",{symbol:w,notional:a,side:O}),c=b.data.data?.status;await ac(),L(!1),af("accepted"===c||"new"===c?"Queued (Market Closed)":"Filled"),(0,p.playKaChing)(),N(!0),setTimeout(()=>{N(!1),F(!1),B(!1),D(!1),J("")},1800)}catch(a){L(!1),v.error("Order failed: "+(a.response?.data?.message||a.message)),F(!1)}}};if(s||!a)return null;let ah=parseFloat(I)||0,ai=S.price?ah/S.price:0,aj=(0,g.getCompanyInfo)(x.symbol,x.name);return(0,b.jsxs)("div",{className:"min-h-screen bg-white dark:bg-black pb-24",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6",children:[(0,b.jsx)("button",{onClick:()=>t.back(),className:"p-2 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-full transition-all",children:(0,b.jsx)(h.ArrowLeft,{className:"w-6 h-6"})}),(0,b.jsx)("div",{className:"w-10"})]}),(0,b.jsxs)("div",{className:"px-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)("div",{className:"w-14 h-14 rounded-full flex items-center justify-center text-2xl font-bold",style:{backgroundColor:x.color+"20"},children:x.icon}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:x.name}),$?(0,b.jsx)("div",{className:"h-4 w-16 bg-gray-200 dark:bg-zinc-800 animate-pulse rounded mt-1"}):(0,b.jsxs)("p",{className:`text-sm font-bold ${S.isUp?"text-cashapp":"text-red-500"}`,children:[S.isUp?"↑":"↓"," ",Math.abs(S.change).toFixed(2),"%"]})]})]}),(0,b.jsx)("div",{className:"bg-gray-100 dark:bg-zinc-800 px-4 py-2 rounded-full",children:$?(0,b.jsx)("div",{className:"h-6 w-16 bg-gray-200 dark:bg-zinc-700 animate-pulse rounded"}):(0,b.jsxs)("p",{className:"text-lg font-bold",children:["$",S.price.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})})]}),aa>0&&!$&&(0,b.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase tracking-widest",children:"Your Position"}),(0,b.jsxs)("p",{className:"text-xl font-bold mt-1",children:[aa.toFixed(4)," Shares"]}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["≈ $",ab.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),(0,b.jsx)("div",{className:"px-2 mt-6 relative",children:$&&0===U.length?(0,b.jsx)("div",{className:"h-[220px] flex items-center justify-center",children:(0,b.jsx)(k.Loader2,{className:"w-8 h-8 animate-spin text-gray-300"})}):(0,b.jsx)(f.default,{data:U,color:x.color,height:220})}),(0,b.jsx)("div",{className:"flex justify-center space-x-2 px-6 mt-4 mb-8",children:q.map(a=>(0,b.jsx)("button",{onClick:()=>z(a),className:`px-4 py-2 rounded-full text-sm font-bold transition-all ${y===a?"bg-black dark:bg-white text-white dark:text-black":"text-gray-400 hover:text-gray-600"}`,children:a},a))}),(0,b.jsxs)("div",{className:"px-6 mb-8 mt-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold mb-4",children:"About"}),(0,b.jsx)("p",{className:"text-gray-500 text-sm leading-relaxed mb-6",children:aj.about}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase tracking-widest mb-1",children:"CEO"}),(0,b.jsx)("p",{className:"font-bold text-sm",children:aj.ceo})]}),(0,b.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase tracking-widest mb-1",children:"Employees"}),(0,b.jsx)("p",{className:"font-bold text-sm",children:aj.employees})]}),(0,b.jsxs)("div",{className:"col-span-2 p-4 bg-gray-50 dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase tracking-widest mb-1",children:"Headquarters"}),(0,b.jsx)("p",{className:"font-bold text-sm",children:aj.hq})]})]})]}),(0,b.jsx)("div",{className:"fixed bottom-0 left-0 right-0 max-w-md mx-auto p-6 bg-white/80 dark:bg-black/80 backdrop-blur-md border-t border-gray-100 dark:border-zinc-800",children:(0,b.jsxs)("div",{className:"flex space-x-3",children:[(0,b.jsx)("button",{onClick:()=>{P("buy"),J(""),B(!0),H(!1)},className:"flex-1 bg-black dark:bg-white text-white dark:text-black font-bold py-4 rounded-full text-lg hover:scale-[1.02] active:scale-95 transition-all",children:"Buy"}),(0,b.jsx)("button",{onClick:()=>{P("sell"),J(""),D(!0),H(!1)},disabled:aa<=0,className:"flex-1 bg-gray-100 dark:bg-zinc-800 font-bold py-4 rounded-full text-lg hover:scale-[1.02] active:scale-95 transition-all disabled:opacity-50",children:"Sell"})]})}),(A||C)&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-end justify-center bg-black/50",onClick:()=>{B(!1),D(!1)},children:(0,b.jsxs)("div",{className:"w-full max-w-md bg-white dark:bg-zinc-900 rounded-t-3xl p-6 animate-in slide-in-from-bottom duration-300",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("div",{className:"flex justify-center mb-4",children:(0,b.jsx)("div",{className:"w-12 h-1.5 bg-gray-200 dark:bg-zinc-700 rounded-full"})}),(0,b.jsxs)("h2",{className:"text-xl font-bold text-center mb-1",children:["buy"===O?"Buy":"Sell"," ",x.name]}),(0,b.jsx)("div",{className:"flex justify-center mb-2",children:(0,b.jsxs)("span",{className:"text-gray-500 font-medium text-sm",children:["$","buy"===O?Y.toLocaleString():ab.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})," ","Available"]})}),(0,b.jsx)("div",{className:"flex justify-center mb-6 mt-4",children:(0,b.jsx)("span",{className:"px-4 py-1.5 bg-gray-100 dark:bg-zinc-800 rounded-full text-sm font-medium",children:"One-Time Purchase ▾"})}),G?(0,b.jsxs)("div",{className:"animate-in fade-in duration-200",children:[(0,b.jsxs)("div",{className:"text-center text-4xl font-bold mb-6 mt-4",children:["$",I||"0"]}),(0,b.jsx)(m.default,{amount:I,setAmount:J}),(0,b.jsx)("button",{onClick:()=>H(!1),className:"w-full mt-6 py-4 text-gray-500 font-bold hover:bg-gray-50 dark:hover:bg-zinc-800 rounded-full transition-all",children:"Cancel Custom Amount"})]}):(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[r.map(a=>(0,b.jsxs)("button",{onClick:()=>J(String(a)),className:`py-4 rounded-2xl font-bold text-lg transition-all border ${I===String(a)?"border-black dark:border-white bg-gray-50 dark:bg-zinc-800":"border-gray-200 dark:border-zinc-700 hover:border-gray-400"}`,children:["$",a]},a)),(0,b.jsx)("button",{onClick:()=>{H(!0),J("")},className:`py-4 rounded-2xl font-bold text-lg transition-all border ${I&&!r.includes(Number(I))?"border-black dark:border-white bg-gray-50 dark:bg-zinc-800":"border-gray-200 dark:border-zinc-700 hover:border-gray-400"}`,children:I&&!r.includes(Number(I))?`$${I}`:"..."})]})}),"buy"===O&&(!I||parseFloat(I)>Y)&&""!==I&&(0,b.jsxs)("p",{className:"text-red-500 text-sm text-center mt-4 mb-2 font-medium",children:["Amount exceeds your cash balance ($",Y.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),")"]}),"sell"===O&&(!I||parseFloat(I)>ab)&&""!==I&&(0,b.jsxs)("p",{className:"text-red-500 text-sm text-center mt-4 mb-2 font-medium",children:["Amount exceeds your stock balance ($",ab.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),")"]}),(0,b.jsx)("button",{onClick:()=>{let a=parseFloat(I);a&&a>0&&(B(!1),D(!1),F(!0))},disabled:!I||0>=parseFloat(I)||"sell"===O&&parseFloat(I)>ab||"buy"===O&&parseFloat(I)>Y,className:"w-full mt-4 bg-cashapp text-white font-bold py-4 rounded-full text-lg shadow-lg disabled:opacity-30 disabled:shadow-none hover:scale-[1.02] active:scale-95 transition-all ",children:"Next"})]})}),E&&(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col bg-white dark:bg-black",children:[(0,b.jsx)("div",{className:"flex justify-end p-6",children:(0,b.jsx)("button",{onClick:()=>{F(!1),J("")},className:"p-2 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-full transition-all",children:(0,b.jsx)(i.X,{className:"w-6 h-6"})})}),M?(0,b.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center",children:[(0,b.jsx)(j.CheckCircle2,{className:"w-20 h-20 text-cashapp mb-4 animate-bounce"}),(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Order Placed!"}),(0,b.jsxs)("p",{className:"text-gray-500 mt-2 font-medium",children:[ae," • ","buy"===O?"Bought":"Sold"," $",ah.toFixed(2)," of ",x.name]}),(0,b.jsx)("button",{onClick:()=>t.push("/stocks"),className:"mt-8 text-black dark:text-white font-bold underline",children:"Back to Stocks"})]}):(0,b.jsxs)("div",{className:"flex-1 flex flex-col justify-between px-8 pb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-3xl font-bold mb-10",children:["buy"===O?"Buy":"Sell"," $",ah.toFixed(2)," of"," ",x.name]}),(0,b.jsxs)("div",{className:"space-y-4",children:[[{label:"Funding Source",value:"FlowCash"},{label:"Order Type",value:"Market"},{label:"Approx Price",value:`$${S.price.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`},{label:"Approx Shares",value:`${ai.toFixed(4)}`},{label:"Symbol",value:x.symbol}].map(a=>(0,b.jsxs)("div",{className:"flex justify-between py-2",children:[(0,b.jsx)("span",{className:"text-gray-500",children:a.label}),(0,b.jsx)("span",{className:"font-bold",children:a.value})]},a.label)),(0,b.jsxs)("div",{className:"border-t border-gray-100 dark:border-zinc-800 pt-4 mt-4 space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Total Amount"}),(0,b.jsxs)("span",{className:"font-bold",children:["$",ah.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Fees"}),(0,b.jsx)("span",{className:"font-bold",children:"$0.00"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-500 font-bold",children:"Total Cost"}),(0,b.jsxs)("span",{className:"font-bold text-lg",children:["$",ah.toFixed(2)]})]})]})]})]}),(0,b.jsx)("button",{onClick:()=>R(!0),disabled:K,className:"w-full bg-black dark:bg-white text-white dark:text-black font-bold py-5 rounded-full text-lg hover:scale-[1.02] active:scale-95 transition-all disabled:opacity-50",children:K?(0,b.jsx)(k.Loader2,{className:"w-6 h-6 animate-spin mx-auto"}):"Confirm"})]})]}),(0,b.jsx)(l.default,{isOpen:Q,onSuccess:()=>{R(!1),ag()},onClose:()=>R(!1),userId:a?.id})]})}a.s(["default",()=>s])}];

//# sourceMappingURL=frontend_app_stocks_detail_StockDetailClient_5f708178.js.map