module.exports=[21900,a=>{"use strict";let b=(0,a.i(22638).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],21900)},78807,a=>{"use strict";let b=(0,a.i(22638).default)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 6v6l4 2",key:"mmk7yg"}]]);a.s(["Clock",()=>b],78807)},57039,a=>{"use strict";let b=(0,a.i(22638).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["Lock",()=>b],57039)},54588,a=>{"use strict";function b(){try{let a=new(window.AudioContext||window.webkitAudioContext),b=a.currentTime,c=a.createOscillator(),d=a.createGain();c.connect(d),d.connect(a.destination),c.frequency.setValueAtTime(1200,b),c.frequency.exponentialRampToValueAtTime(800,b+.05),d.gain.setValueAtTime(.3,b),d.gain.exponentialRampToValueAtTime(.001,b+.1),c.start(b),c.stop(b+.1);let e=a.createOscillator(),f=a.createGain();e.connect(f),f.connect(a.destination),e.type="sine",e.frequency.setValueAtTime(2e3,b+.08),e.frequency.exponentialRampToValueAtTime(3e3,b+.12),e.frequency.exponentialRampToValueAtTime(2500,b+.5),f.gain.setValueAtTime(1e-4,b+.08),f.gain.linearRampToValueAtTime(.25,b+.12),f.gain.exponentialRampToValueAtTime(.001,b+.6),e.start(b+.08),e.stop(b+.6);let g=a.createOscillator(),h=a.createGain();g.connect(h),h.connect(a.destination),g.type="sine",g.frequency.setValueAtTime(4e3,b+.1),g.frequency.exponentialRampToValueAtTime(5e3,b+.15),h.gain.setValueAtTime(1e-4,b+.1),h.gain.linearRampToValueAtTime(.1,b+.15),h.gain.exponentialRampToValueAtTime(.001,b+.4),g.start(b+.1),g.stop(b+.4),setTimeout(()=>a.close(),1e3)}catch(a){console.warn("Audio not supported:",a)}}a.s(["playKaChing",()=>b])},3984,74155,a=>{"use strict";var b=a.i(22638);let c=(0,b.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);a.s(["Copy",()=>c],3984);let d=(0,b.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>d],74155)},66079,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(82313),e=a.i(93609),f=a.i(75038),g=a.i(59277),h=a.i(21900),i=a.i(22638);let j=(0,i.default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),k=(0,i.default)("arrow-down-left",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);var l=a.i(3984),m=a.i(74155),n=a.i(47802),o=a.i(78807),p=a.i(26330),q=a.i(25792);let r=(0,i.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var s=a.i(57855),t=a.i(54588);function u(){let a,{user:i,loading:u}=(0,d.useAuth)(),v=(0,e.useRouter)(),w=(0,e.useSearchParams)().get("id"),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)([]),[B,C]=(0,c.useState)(!0),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(!1),H=(0,c.useRef)(null),I=(0,g.useToast)();(0,c.useEffect)(()=>{u||i||v.push("/login")},[i,u]),(0,c.useEffect)(()=>{i&&w&&J()},[i,w]);let J=async()=>{C(!0);try{let{data:a}=await f.default.get(`/transfer/${w}`);y(a.data.transaction),A(a.data.ledgerEntries||[])}catch(a){console.error("Failed to fetch transaction detail")}finally{C(!1)}},K=async a=>{try{await f.default.post(`/transfer/respond/${w}`,{action:a}),"accept"===a?((0,t.playKaChing)(),I.success("Payment sent successfully")):I.success("Request declined"),await J()}catch(b){I.error(`Failed to ${a}: `+(b.response?.data?.message||b.message))}},L=async()=>{try{await f.default.delete(`/trading/order/${w}`),I.success("Order cancelled and funds refunded"),await J()}catch(a){I.error("Failed to cancel order: "+(a.response?.data?.message||a.message))}};if(u||!i||B)return(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-white dark:bg-black",children:(0,b.jsx)("div",{className:"w-10 h-10 border-4 border-cashapp border-t-transparent rounded-full animate-spin"})});if(!x)return(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-white dark:bg-black p-6",children:[(0,b.jsx)(r,{className:"w-16 h-16 text-gray-300 mb-4"}),(0,b.jsx)("p",{className:"text-gray-500 font-medium",children:"Transaction not found"}),(0,b.jsx)("button",{onClick:()=>v.push("/activity"),className:"mt-4 text-cashapp font-bold",children:"Back to Activity"})]});let M=x.sender_id===i.id,N="request"===x.type,O=M?x.receiver_name:x.sender_name,P=M?x.receiver_cashtag:x.sender_cashtag,Q={completed:{icon:p.CheckCircle2,color:"text-cashapp",bg:"bg-cashapp/10",label:"Completed"},pending:{icon:o.Clock,color:"text-amber-500",bg:"bg-amber-500/10",label:"Pending"},cancelled:{icon:q.XCircle,color:"text-red-500",bg:"bg-red-500/10",label:"Cancelled"},failed:{icon:q.XCircle,color:"text-red-500",bg:"bg-red-500/10",label:"Failed"},filled:{icon:p.CheckCircle2,color:"text-cashapp",bg:"bg-cashapp/10",label:"Filled"}},R=Q[x.status]||Q.pending,S=R.icon;if(N)a=x.receiver_id===i.id?`Requested from ${O}`:`Request from ${x.receiver_name}`;else if("trade"===x.type){let b="buy"===x.side,c=x.symbol?.split("/")[0]||"Asset";a=`${b?"Bought":"Sold"} ${c}`}else a=M?`Sent to ${O}`:`Received from ${O}`;return(0,b.jsxs)("div",{className:"min-h-screen bg-white dark:bg-black p-6",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4 mb-8",children:[(0,b.jsx)("button",{onClick:()=>v.push("/activity"),className:"p-2 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-full transition-all",children:(0,b.jsx)(h.ArrowLeft,{className:"w-6 h-6"})}),(0,b.jsx)("h1",{className:"text-xl font-bold",children:"Transaction Details"})]}),(0,b.jsxs)("div",{className:"bg-gray-50 dark:bg-zinc-900 rounded-3xl p-6 mb-6",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,b.jsx)("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-4 ${N?"bg-amber-500/10 text-amber-500":M?"bg-gray-200 dark:bg-zinc-800 text-gray-500":"bg-cashapp/10 text-cashapp"}`,children:N?(0,b.jsx)(o.Clock,{className:"w-7 h-7"}):"trade"===x.type?"crypto"===x.asset_type?(0,b.jsx)("span",{className:"text-2xl",children:"â‚¿"}):(0,b.jsx)("span",{className:"text-2xl",children:"ðŸ“ˆ"}):M?(0,b.jsx)(j,{className:"w-7 h-7"}):(0,b.jsx)(k,{className:"w-7 h-7"})}),(0,b.jsxs)("p",{className:`text-5xl font-bold tracking-tight ${!M&&"send"===x.type||"trade"===x.type&&"sell"===x.side?"text-cashapp":""}`,children:[(M||"send"!==x.type)&&("trade"!==x.type||"sell"!==x.side)?"send"===x.type||"trade"===x.type&&"buy"===x.side?"-":"":"+","$",(x.amount/100).toFixed(2)]}),(0,b.jsx)("p",{className:"text-gray-500 mt-2 font-medium",children:a})]}),(0,b.jsx)("div",{className:"flex justify-center mb-6",children:(0,b.jsxs)("div",{className:`flex items-center space-x-2 px-4 py-2 rounded-full ${R.bg}`,children:[(0,b.jsx)(S,{className:`w-4 h-4 ${R.color}`}),(0,b.jsx)("span",{className:`text-sm font-bold ${R.color}`,children:R.label})]})}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-black rounded-2xl",children:(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-cashapp/10 rounded-full flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-cashapp font-bold text-lg",children:O?.charAt(0)?.toUpperCase()||"?"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-bold",children:O}),"trade"!==x.type&&(0,b.jsx)("p",{className:"text-sm text-cashapp",children:P})]})]})}),"trade"===x.type&&(0,b.jsxs)("div",{className:"p-4 bg-white dark:bg-black rounded-2xl space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"Asset"}),(0,b.jsx)("span",{className:"text-sm font-bold",children:x.symbol?.split("/")[0]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"Quantity"}),(0,b.jsx)("span",{className:"text-sm font-bold",children:Number(x.quantity).toLocaleString(void 0,{maximumFractionDigits:"crypto"===x.asset_type?8:4})})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"Average Price"}),(0,b.jsxs)("span",{className:"text-sm font-bold",children:["$",(x.price_cents/100).toFixed(2)]})]})]}),x.note&&(0,b.jsxs)("div",{className:"p-4 bg-white dark:bg-black rounded-2xl",children:[(0,b.jsx)("p",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 mb-1",children:"Note"}),(0,b.jsxs)("p",{className:"font-medium italic",children:['"',x.note,'"']})]})]})]}),N&&"pending"===x.status&&x.sender_id===i.id&&(0,b.jsxs)("div",{className:"flex space-x-3 mb-6",children:[(0,b.jsxs)("button",{onClick:()=>{H.current=()=>K("accept"),G(!0)},className:"flex-1 flex items-center justify-center space-x-2 bg-cashapp text-white font-bold py-4 rounded-2xl hover:scale-[1.02] active:scale-95 transition-all shadow-lg shadow-cashapp/20",children:[(0,b.jsx)(m.Check,{className:"w-5 h-5"}),(0,b.jsxs)("span",{children:["Pay $",(x.amount/100).toFixed(2)]})]}),(0,b.jsxs)("button",{onClick:()=>K("decline"),className:"flex-1 flex items-center justify-center space-x-2 bg-gray-100 dark:bg-zinc-800 font-bold py-4 rounded-2xl hover:scale-[1.02] active:scale-95 transition-all",children:[(0,b.jsx)(n.X,{className:"w-5 h-5"}),(0,b.jsx)("span",{children:"Decline"})]})]}),"trade"===x.type&&"pending"===x.status&&(0,b.jsx)("div",{className:"flex mb-6",children:(0,b.jsxs)("button",{onClick:()=>{H.current=L,G(!0)},className:"flex-1 flex items-center justify-center space-x-2 bg-red-500 text-white font-bold py-4 rounded-2xl hover:bg-red-600 active:scale-95 transition-all shadow-lg shadow-red-500/20",children:[(0,b.jsx)(n.X,{className:"w-5 h-5"}),(0,b.jsx)("span",{children:"Cancel Order"})]})}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h3",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 mb-2",children:"Details"}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-zinc-900 rounded-2xl",children:[(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"Type"}),(0,b.jsx)("span",{className:"text-sm font-bold capitalize",children:x.type})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-zinc-900 rounded-2xl",children:[(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"Date"}),(0,b.jsx)("span",{className:"text-sm font-bold",children:new Date(x.created_at).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-zinc-900 rounded-2xl",children:[(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"Time"}),(0,b.jsx)("span",{className:"text-sm font-bold",children:new Date(x.created_at).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})})]}),(0,b.jsxs)("button",{onClick:()=>{navigator.clipboard.writeText(w),E(!0),setTimeout(()=>E(!1),1500)},className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-zinc-900 rounded-2xl hover:bg-gray-100 dark:hover:bg-zinc-800 transition-all",children:[(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"Transaction ID"}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsxs)("span",{className:"text-xs font-mono text-gray-400",children:[w?.slice(0,8),"..."]}),D?(0,b.jsx)(p.CheckCircle2,{className:"w-4 h-4 text-cashapp"}):(0,b.jsx)(l.Copy,{className:"w-4 h-4 text-gray-400"})]})]}),z.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h3",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 mt-6 mb-2",children:"Ledger"}),z.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-zinc-900 rounded-2xl",children:[(0,b.jsx)("span",{className:"text-sm text-gray-500 capitalize",children:a.entry_type}),(0,b.jsxs)("span",{className:`text-sm font-bold ${"credit"===a.entry_type?"text-cashapp":"text-red-400"}`,children:["credit"===a.entry_type?"+":"-","$",(a.amount/100).toFixed(2)]})]},c))]})]}),(0,b.jsx)(s.default,{isOpen:F,onSuccess:()=>{G(!1),H.current&&(H.current(),H.current=null)},onClose:()=>{G(!1),H.current=null},userId:i?.id})]})}a.s(["default",()=>u],66079)}];

//# sourceMappingURL=frontend_8cda6753._.js.map